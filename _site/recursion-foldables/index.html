<!DOCTYPE html>
<html>
  <head>
    <title>Recursion Principles and Foldables – Carl J. Factora – Writer | Mathematician | Programmer | SSBM Fox Main</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="Writer | Mathematician | Programmer | SSBM Fox Main">
    <meta property="og:description" content="Writer | Mathematician | Programmer | SSBM Fox Main" />
    
    <meta name="author" content="Carl J. Factora" />

    
    <meta property="og:title" content="Recursion Principles and Foldables" />
    <meta property="twitter:title" content="Recursion Principles and Foldables" />
    

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="alternate" type="application/rss+xml" title="Carl J. Factora - Writer | Mathematician | Programmer | SSBM Fox Main" href="/feed.xml" />

    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
  </head>

  <body>
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/" class="site-avatar"><img src="https://ivanthetricourne.github.io/images/me.jpg" /></a>

          <div class="site-info">
            <h1 class="site-name"><a href="/">Carl J. Factora</a></h1>
            <p class="site-description">Writer | Mathematician | Programmer | SSBM Fox Main</p>
          </div>

          <nav>
            <a href="/">Blog</a>
	    <a href="/projects">Projects</a>
	    <a href="/functional-programming">F.P.</a>
            <a href="/about">About</a>
          </nav>
        </header>
      </div>
    </div>

    <div id="main" role="main" class="container">
      <article class="page">

  <h1>Recursion Principles and Foldables</h1>

  <div class="entry">
    <p>Consider the definition of the simplest foldable data structure: the <em>Natural Number</em>!</p>
<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="kr">data</span> <span class="kt">Nat</span> <span class="o">=</span> <span class="kt">Zero</span>
         <span class="o">|</span> <span class="kt">Add1</span> <span class="kt">Nat</span>

<span class="c1">-- How to print natural numbers a nice way :P</span>
<span class="kr">instance</span> <span class="kt">Show</span> <span class="kt">Nat</span> <span class="kr">where</span>
  <span class="n">show</span> <span class="kt">Zero</span>     <span class="o">=</span> <span class="n">show</span> <span class="p">(</span><span class="mi">0</span> <span class="o">::</span> <span class="kt">Integer</span><span class="p">)</span>
  <span class="n">show</span> <span class="p">(</span><span class="kt">Add1</span> <span class="n">n</span><span class="p">)</span> <span class="o">=</span> <span class="n">show</span> <span class="o">$</span> <span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="n">read</span> <span class="o">$</span> <span class="n">show</span> <span class="n">n</span><span class="p">)</span>
</code></pre>
</div>

<p>A natural number is either <code class="highlighter-rouge">Zero</code> or the successor of (i.e., 1 value greater than) another natural number. Think <em>peano numbers</em>. With this, we have defined a data structure that includes all positive integers and as well as 0.</p>

<p>Let’s define some basic functions for Natural Numbers:</p>
<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="c1">-- add two natural numbers together.</span>
<span class="n">plus</span> <span class="o">::</span> <span class="kt">Nat</span> <span class="o">-&gt;</span> <span class="kt">Nat</span> <span class="o">-&gt;</span> <span class="kt">Nat</span>
<span class="n">plus</span> <span class="kt">Zero</span>     <span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
<span class="n">plus</span> <span class="p">(</span><span class="kt">Add1</span> <span class="n">x</span><span class="p">)</span> <span class="n">y</span> <span class="o">=</span> <span class="kt">Add1</span> <span class="p">(</span><span class="n">x</span> <span class="p">`</span><span class="n">plus</span><span class="p">`</span> <span class="n">y</span><span class="p">)</span>

<span class="c1">-- multiply two natural numbers.</span>
<span class="n">times</span> <span class="o">::</span> <span class="kt">Nat</span> <span class="o">-&gt;</span> <span class="kt">Nat</span> <span class="o">-&gt;</span> <span class="kt">Nat</span>
<span class="n">times</span> <span class="kt">Zero</span>     <span class="kr">_</span> <span class="o">=</span> <span class="kt">Zero</span>
<span class="n">times</span> <span class="p">(</span><span class="kt">Add1</span> <span class="n">x</span><span class="p">)</span> <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="p">`</span><span class="n">times</span><span class="p">`</span> <span class="n">y</span><span class="p">)</span> <span class="p">`</span><span class="n">plus</span><span class="p">`</span> <span class="n">y</span>

<span class="c1">-- pow raises its first argument to the power of the second argument.</span>
<span class="n">pow</span> <span class="o">::</span> <span class="kt">Nat</span> <span class="o">-&gt;</span> <span class="kt">Nat</span> <span class="o">-&gt;</span> <span class="kt">Nat</span>
<span class="n">pow</span> <span class="kr">_</span> <span class="kt">Zero</span>     <span class="o">=</span> <span class="kt">Add1</span> <span class="kt">Zero</span>
<span class="n">pow</span> <span class="n">x</span> <span class="p">(</span><span class="kt">Add1</span> <span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="p">`</span><span class="n">pow</span><span class="p">`</span> <span class="n">y</span><span class="p">)</span> <span class="p">`</span><span class="n">times</span><span class="p">`</span> <span class="n">x</span>
</code></pre>
</div>

<p>Cool, but nothing really out of the ordinary here. These are just your average, every-day run of the mill recursively defined functions, but we can make things a bit more interesting.</p>

<p>Consider the following definition of <code class="highlighter-rouge">foldNat</code>, which behaves exactly like a reducer (i.e., a <em>recursion principle</em>) for natural numbers.</p>

<p>Any data structure that is defined similarly to natural numbers (e.g. Lists) has a corresponding <code class="highlighter-rouge">fold</code> function. Looking at its type definition, <code class="highlighter-rouge">foldNat</code> takes an <code class="highlighter-rouge">a</code>, a function of type <code class="highlighter-rouge">a -&gt; a</code>, a <code class="highlighter-rouge">Nat</code> and returns an <code class="highlighter-rouge">a</code>. One should think of <code class="highlighter-rouge">a</code> as equivalent to <em>any</em> type, which makes <code class="highlighter-rouge">foldNat</code> an example of a <strong>polymorphic function</strong>. I will write more about those later on :)</p>

<p>Essentially, the job of <code class="highlighter-rouge">foldNat</code> is to take <em>any</em> natural number into the appropriate <code class="highlighter-rouge">a</code>. For example, reading the first line of <code class="highlighter-rouge">foldNat</code> says that:</p>

<p><em>In the event that</em> <code class="highlighter-rouge">n</code> <em>is the natural number</em> <code class="highlighter-rouge">Zero</code>, <code class="highlighter-rouge">foldNat</code> <em>should return</em> <code class="highlighter-rouge">base</code>.</p>

<p>Consequently, the second line of <code class="highlighter-rouge">foldNat</code> is called in the event that the given <code class="highlighter-rouge">n</code> is <strong>not</strong> <code class="highlighter-rouge">Zero</code> but is instead the <code class="highlighter-rouge">Add1</code> of another natural number <code class="highlighter-rouge">n</code>. Thus, <code class="highlighter-rouge">foldNat</code> would then recur on the smaller natural number, <code class="highlighter-rouge">n</code>, resulting in an <code class="highlighter-rouge">a</code> which is then passed to <code class="highlighter-rouge">recur</code> that does whatever it is it’s meant to do. The real magic that happens is mostly contained within the function <code class="highlighter-rouge">recur</code> passed to <code class="highlighter-rouge">foldNat</code> (<strong>hint</strong> <strong>hint</strong>).</p>
<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="n">foldNat</span> <span class="o">::</span> <span class="n">a</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Nat</span> <span class="o">-&gt;</span> <span class="n">a</span>
<span class="n">foldNat</span> <span class="n">base</span> <span class="n">recur</span> <span class="kt">Zero</span>     <span class="o">=</span> <span class="n">base</span>
<span class="n">foldNat</span> <span class="n">base</span> <span class="n">recur</span> <span class="p">(</span><span class="kt">Add1</span> <span class="n">n</span><span class="p">)</span> <span class="o">=</span> <span class="n">recur</span> <span class="o">$</span> <span class="n">foldNat</span> <span class="n">base</span> <span class="n">recur</span> <span class="n">n</span>
</code></pre>
</div>
<p>To further understand what exactly <code class="highlighter-rouge">foldNat</code> is meant to do, I’ve included some exercises! As an example, I’ve done the first of these.</p>

<p>For those who want a little bit more, I’ve also included a bonus question to define factorial (<code class="highlighter-rouge">fact</code>) in terms of <code class="highlighter-rouge">foldNat</code>.</p>

<p>Good luck!</p>

<p><em>Hint</em>: You may find it useful to define a few natural numbers to avoid having to write out a long series of <code class="highlighter-rouge">Add1</code>s every time you want to test your functions. For example:</p>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="n">two</span> <span class="o">::</span> <span class="kt">Nat</span>
<span class="n">two</span> <span class="o">=</span> <span class="kt">Add1</span> <span class="p">(</span><span class="kt">Add1</span> <span class="kt">Zero</span><span class="p">)</span>

<span class="n">five</span> <span class="o">::</span> <span class="kt">Nat</span>
<span class="n">five</span> <span class="o">=</span> <span class="kt">Add1</span> <span class="p">(</span><span class="kt">Add1</span> <span class="p">(</span><span class="kt">Add1</span> <span class="p">(</span><span class="kt">Add1</span> <span class="p">(</span><span class="kt">Add1</span> <span class="kt">Zero</span><span class="p">))))</span>
</code></pre>
</div>

<p><strong>Exercises</strong>:</p>
<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="c1">-- 1. Define `plusFold` that behaves like `plus` but uses `foldNat`.</span>
<span class="n">plusFold</span> <span class="o">::</span> <span class="kt">Nat</span> <span class="o">-&gt;</span> <span class="kt">Nat</span> <span class="o">-&gt;</span> <span class="kt">Nat</span>
<span class="n">plusFold</span> <span class="n">m</span> <span class="n">n</span> <span class="o">=</span> <span class="n">foldNat</span> <span class="n">n</span> <span class="kt">Add1</span> <span class="n">m</span>

<span class="c1">-- 2. Define `timesFold` that behaves like `times` but uses `foldNat`.</span>
<span class="n">timesFold</span> <span class="o">::</span> <span class="kt">Nat</span> <span class="o">-&gt;</span> <span class="kt">Nat</span> <span class="o">-&gt;</span> <span class="kt">Nat</span>
<span class="n">timesFold</span> <span class="o">=</span> <span class="n">undefined</span>

<span class="c1">-- 3. Define `powFold` that behaves like `pow` but uses `foldNat`.</span>
<span class="n">powFold</span> <span class="o">::</span> <span class="kt">Nat</span> <span class="o">-&gt;</span> <span class="kt">Nat</span> <span class="o">-&gt;</span> <span class="kt">Nat</span>
<span class="n">powFold</span> <span class="o">=</span> <span class="n">undefined</span>

<span class="c1">-- BONUS!! This is rather difficult...</span>
<span class="n">fact</span> <span class="o">::</span> <span class="kt">Nat</span> <span class="o">-&gt;</span> <span class="kt">Nat</span>
<span class="n">fact</span> <span class="kt">Zero</span>     <span class="o">=</span> <span class="kt">Add1</span> <span class="kt">Zero</span>
<span class="n">fact</span> <span class="p">(</span><span class="kt">Add1</span> <span class="n">n</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="kt">Add1</span> <span class="n">n</span><span class="p">)</span> <span class="p">`</span><span class="n">times</span><span class="p">`</span> <span class="p">(</span><span class="n">fact</span> <span class="n">n</span><span class="p">)</span>

<span class="n">factFold</span> <span class="o">::</span> <span class="kt">Nat</span> <span class="o">-&gt;</span> <span class="kt">Nat</span>
<span class="n">factFold</span> <span class="o">=</span> <span class="n">undefined</span>
</code></pre>
</div>

  </div>
</article>

    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          



<a href="https://github.com/IvantheTricourne"><i class="svg-icon github"></i></a>

<a href="https://www.linkedin.com/in/cfactora"><i class="svg-icon linkedin"></i></a>


<a href="https://www.twitter.com/CJF_setBaNG"><i class="svg-icon twitter"></i></a>



        </footer>
      </div>
    </div>

    

  </body>
</html>
